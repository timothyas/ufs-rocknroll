# Atmosphere model general settings.
atmos_general:
     
     # Define the calendar type for the FV3 simulation; currently
     # supported options are:

     # 0; no-calendar

     # 1; thirty-day months
          
     # 2; julian

     # 3; gregorian

     # 4; noleap
     calendar: 2

     # Define whether to update the land/surface variables using the
     # UFS gcycle application; if using the global_cycle application
     # or land/surface data-assimilation applications, this should be
     # set to False.
     update_landsfc: True

     # Define the restart file creation frequency for the atmosphere
     # model; units are seconds.
     restart_freq_seconds: 10800

     # Define the path to the file containing the vertical levels for
     # the atmosphere model.
     vcoord_filepath: !ENV ${HOMErnr}/fix/fv3/fix_am/global_hyblev.l128.txt

     # Define the path to the model_configure template file.
     model_configure_tmpl: !ENV ${PARMrnr}/ufs_rnr/model_configure.tmpl

     # Define the path to the YAML-formatted file containing the
     # products to be delivered.
     bkgrdfcst_products_yaml: !ENV ${rocknroll}/experiments/small-letkf/bkgrdfcst_products.yaml

     # Define the UFS-RNR I/O data table template file (i.e.,
     # data_table); this file is used by the UFS-RNR for run-time
     # output.
     data_table_tmpl: !ENV ${PARMrnr}/ufs_rnr/data_table.tmpl

     # Define the UFS-RNR I/O diagnostic table template file (i.e.,
     # diag_table); this file is used by the UFS-RNR for run-time
     # output.
     diag_table_tmpl: !ENV ${PARMrnr}/ufs_rnr/diag_table.tmpl

     # Define the UFS-RNR I/O field table template file (i.e.,
     # field_table); this file is used by the UFS-RNR for run-time
     # output.
     field_table_tmpl: !ENV ${PARMrnr}/ufs_rnr/field_table.tmpl

     # Define the coupler file prefix; this file is generated by the
     # UFS to faciliate the coupling of the respective component
     # models; the format for these files is typically as follows:

     # <file_prefix>.%Y-%m-%d-<total_seconds_of_day>.nc
     coupler_file_prefix: ufs.cpld.cpl.r

     # Deterministic forecast general settings.
     deterministic:
     
          # Define the time-step for the UFS; units are seconds.
          dt_atmos: 900

          # Specify whether to turn on cellular autonoma methods.
          do_ca: True
          
          # Define the atmosphere model coupling interval; used only
          # if the UFS is implementing the coupled-modeling system;
          # units are seconds.
          coupling_interval_sec: 900

          # Define the path to the input.nml template file.
          input_nml_tmpl: !ENV ${PARMrnr}/atmos/input.nml.tmpl

          # Define the path to the med_modelio.nml template file.
          med_modelio_nml_tmpl: !ENV ${PARMrnr}/atmos/med_modelio.nml.tmpl

          # Define the path to the pio_in template file.
          pio_in_tmpl: !ENV ${PARMrnr}/atmos/pio_in.tmpl

          # Define the FV3 application namelist parameter settings;
          # NOTE: these require the respective FV3 namelist template
          # to have the appropriate template parsing attributes in
          # place.
          fv3_nml_params:
               n_sponge: 42
               ccpp_suite: FV3_GFS_v16_coupled_nsstNoahmpUGWPv1
               tau: 10.0
               rf_cutoff: 7500.0
               d2_bg_k1: 0.15
               d2_bg_k2: 0.04
               k_split: 2
               n_split: 6
               dddmp: 0.2
               dnats: 1
               hord_mt: 5
               hord_vt: 5
               hord_tm: 5
               hord_dp: -5
               hord_tr: 8
               imp_physics: 11
               do_sat_adj: True
               ialb: 2
               iems: 2
               iaer: 1011
               hybedmf: False
               lheatstrg: True
               bl_mynn_edmf: 1
               bl_mynn_tkeadvect: True
               bl_mynn_edmf_mom: 1
               fscav_aero: '*:0.0'
               nstf_name: 2,1,0,0
               do_ugwp_v1_orog_only: False
               knob_ugwp_ndx4lh: 4
               knob_ugwp_dokdis: 2

     # Ensemble forecast general settings.
     ensemble:
          
          # Specify whether to turn on incremental analysis update
          # (IAU) for the respective ensemble members.
          do_iau: False

          # Specify whether to turn on cellular autonoma methods.
          do_ca: True
          
          # Specify whether to turn on stochastic physics
          # perturbations for the respective ensemble members.
          do_stochy: True
          
          # Define the number of iterations; this is required of the
          # stochastic physics to define the random number generator
          # seeds for the respective stochastic physics methods.
          niter: 1
          
          # Define the time-step for the UFS; units are seconds.
          dt_atmos: 900
          
          # Define the atmosphere model coupling interval; used only
          # if the UFS is implementing the coupled-modeling system;
          # units are seconds.
          coupling_interval_sec: 900
          
          # Define the path to the input.nml template file.
          input_nml_tmpl: !ENV ${PARMrnr}/atmos/input.nml.tmpl

          # Define the path to the med_modelio.nml template file.
          med_modelio_nml_tmpl: !ENV ${PARMrnr}/atmos/med_modelio.nml.tmpl

          # Define the path to the pio_in template file.
          pio_in_tmpl: !ENV ${PARMrnr}/atmos/pio_in.tmpl

          # Define the FV3 application namelist parameter settings;
          # NOTE: these require the respective FV3 namelist template
          # to have the appropriate template parsing attributes in
          # place.
          fv3_nml_params:
               iau_filter_increments: False
               n_sponge: 42
               ccpp_suite: FV3_GFS_v16_coupled_nsstNoahmpUGWPv1
               tau: 10.0
               rf_cutoff: 7500.0
               d2_bg_k1: 0.15
               d2_bg_k2: 0.04
               k_split: 2
               n_split: 6
               dnats: 1
               dddmp: 0.2
               hord_mt: 5
               hord_vt: 5
               hord_tm: 5
               hord_dp: -5
               hord_tr: 8
               imp_physics: 11
               do_sat_adj: True
               ialb: 2
               iems: 2
               iaer: 1011
               hybedmf: False
               lheatstrg: True
               bl_mynn_edmf: 1
               bl_mynn_tkeadvect: True
               bl_mynn_edmf_mom: 1
               fscav_aero: '*:0.0'
               nstf_name: 2,1,0,0
               do_ugwp_v1_orog_only: False
               knob_ugwp_ndx4lh: 4
               knob_ugwp_dokdis: 2
               shum: 0.005
               shum_tau: 21600
               shum_lscale: 5000000
               sppt: 0.5
               sppt_tau: 21600
               sppt_lscale: 500000
               sppt_logit: True
               sppt_sfclimit: True
               skeb: 0.3
               skeb_tau: 21600
               skeb_lscale: 250000
               skeb_vdof: 5
               skeb_npass: 30
               skebint: 0
               skebnorm: 0
               use_zmtnblck: True
               stochini: False
               new_lscale: True
          
#----

# Atmosphere model grid settings.
atmos_grid:

     # Specify whether to scrub (i.e., remove) the associated
     # application files and working directory following delivery of
     # the application product files.
     scrub: True

     # Define the top-level directory corresponding to the location of
     # the cubed-sphere grid, orography, and surface climatology
     # files; if this path does not exist, it will be created by the
     # UFS-RNR grids task; if a user is executing a UFS-RNR experiment
     # using previously generated grid files, the UFS-RNR expects to
     # find this path and sub-directories corresponding to the
     # resolutions (e.g., C96) for each component of the UFS-RNR
     # atmosphere model.
     cubed_sphere_path: !ENV ${HOMErnr}/fix/grids/atmos

     # Define the total number of (un-staggered) vertical levels.
     nlevs: 127
     
     # The available options are for the cubed-sphere resolution are
     # as follows:

     # C12: ~8.0 degree
     # C24: ~4.0 degree
     # C48: ~2.0 degree
     # C96: ~1.0 degree
     # C192: ~0.5 degree
     # C384: ~0.25 degree
     # C768: ~0.125 degree
     
     # Deterministic forecast atmosphere model grid settings:
     deterministic:

          # The cubed-sphere resolution.
          resolution: C96

     # Ensemble member forecast atmosphere model grid specifications.
     ensemble:

          # The cubed-sphere resolution.
          resolution: C96

     # Define the path to the top-level fixed climatology (e.g.,
     # fix_sfc_climo) directory.
     fix_sfc_climo_gen_path: !ENV ${HOMErnr}/fix/fv3/fix_sfc_climo

     # Define the namelist template for the surface climatology
     # generation application.
     fix_sfc_climo_gen_nml: !ENV ${PARMrnr}/atmos/sfc_climo_gen.nml.tmpl

     # Define the path to the YAML-formatted file containing the
     # surface climatology generation fixed-files
     fix_sfc_climo_gen_yaml: !ENV ${PARMrnr}/atmos/fix_sfc_climo_gen.yaml

     # Define the path to the fixed files required to generate the FV3
     # orography.
     fix_orog_path: !ENV ${HOMErnr}/fix/fv3/fix_orog

     # Define the path to the YAML formatted file containing the key
     # and value pairs for the fixed files to be used to generate the
     # FV3 orography.
     fix_orog_yaml: !ENV ${PARMrnr}/atmos/fix_orog.yaml

#----

# Atmosphere model initial conditions settings.
atmos_ics:

     # Specify whether to scrub (i.e., remove) the associated
     # application files and working directory following delivery of
     # the application product files.
     scrub: True

     # Define the input file type; the currently supported options
     # are:

     # nemsio; this option is generally used when generating initial
     # condition files from GEFS or reanalysis ensembles; this follows
     # from the ensemble perturbation recentering and interpolation
     # methodology;
          
     # restart; this option is generally used when generating initial
     # condition files from a GDAS archive;
     file_type: nemsio

     # Define the atmosphere model initial condition settings for
     # nemsio (e.g., GEFS) file derived initial conditions.
     nemsio:

          # Define the input tracer variable names.
          tracers_input: spfh, clwmr, o3mr, icmr, rwmr, snmr, grle

          # Define the control forecast file name template; this file
          # will be copied to each ensemble member path and renamed
          # accordingly.
          cntrl_sfc_filename: bfg_%Y%m%d%H_fhr00_control

     # Define the atmosphere model initial condition settings for FV3
     # restart file derived initial conditions.
     restart:

          # Define the input tracer variable names.
          tracer_inputs: sphum, liq_wat, o3mr, ice_wat, rainwat, snowwat, graupel
          
     # Deterministic forecast atmosphere model settings.
     deterministic:

          # The cubed-sphere resolution.
          resolution: C768

     # Ensemble member forecast atmosphere model settings.
     ensemble:
               
          # The cubed-sphere resolution.
          resolution: C384

     # The path to the cubed-sphere grids to be used to generate the
     # ESMF remapping interface.
     grids_path: !ENV ${HOMErnr}/fix/grids/atmos

     # Define the tracer variable names within the atmosphere model
     # initial conditions.
     tracers: sphum, liq_wat, o3mr, ice_wat, rainwat, snowwat, graupel

     # Define the namelist template for the chgres_cube (initial
     # conditions generation) application.
     chgres_cube_nml: !ENV ${PARMrnr}/atmos/chgres_cube.nml
